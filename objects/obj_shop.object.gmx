<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// shop object initialize
canMove = true;

myOption = 0;
buyOption = 0;
sellOption = 0;
questionOption = 0;

cursor_x = 82;
cursor_y = 84; 

lastMenu = "";
targetMenu = "";
topText = "Hello and welcome to my shop!";

menu = "main" // "main", "buy", "sell", "question"

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// available items in shop
// based on what was the previously visited field
if global.field_room == "rm_town"{
    myItem[0] = 1
    myItem[1] = 2
    myItem[2] = 5
    myItem[3] = 0
    myItem[4] = 0
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// return to field/shop
myRoom = asset_get_index(global.field_room);
room_goto(myRoom);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// reactivate input
canMove = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>getKeys</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// navigate options
if down &amp;&amp; canMove{
    if menu == "main" &amp;&amp; myOption &lt; 2{
        cursor_y += 16;
        myOption++;
        canMove = false;
        alarm[0] = 5;
    }else if menu == "buy" &amp;&amp; buyOption &lt; (array_length_1d(myItem)-1){
        cursor_y += 16;
        buyOption++;
        canMove = false;
        alarm[0] = 5;
    }else if menu == "sell" &amp;&amp; sellOption &lt; array_length_1d(global.item){
        sellOption++;
        canMove = false;
        alarm[0] = 5;
    }else if menu == "question" &amp;&amp; questionOption &lt; 1{
        cursor_y += 16;
        questionOption++;
        canMove = false;
        alarm[0] = 5;
    }
}else if up &amp;&amp; canMove{
    if menu == "main" &amp;&amp; myOption &gt; 0{
        cursor_y -= 16;
        myOption--;
        canMove = false;
        alarm[0] = 5;
    }else if menu == "buy" &amp;&amp; buyOption &gt; 0{
        cursor_y -= 16;
        buyOption--;
        canMove = false;
        alarm[0] = 5;
    }else if menu == "sell" &amp;&amp; sellOption &gt; 0{
        sellOption--;
        canMove = false;
        alarm[0] = 5;
    }else if menu == "question" &amp;&amp; questionOption &gt; 0{
        cursor_y -= 16;
        questionOption--;
        canMove = false;
        alarm[0] = 5;
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// select options
if a &amp;&amp; canMove &amp;&amp; menu == "main"{
    if myOption == 0{
        cursor_y = 84;
        buyOption = 0; 
        menu = "buy"
        canMove = false;
        alarm[0] = 5;        
    }else if myOption == 1{
        cursor_y = 84;
        sellOption = 0; 
        menu = "sell"
        canMove = false;
        alarm[0] = 5;  
    }else if myOption == 2{
        canMove = false;
        topText = "Thank you come again";
        alarm[1] = 30;  
    }
}else if a &amp;&amp; canMove &amp;&amp; menu == "buy"{
    cursor_y = 84; 
    lastMenu = "buy"
    questionOption = 0;
    menu = "question"
    canMove = false;
    alarm[0] = 5;
}else if a &amp;&amp; canMove &amp;&amp; menu == "sell"{
    cursor_y = 84; 
    lastMenu = "sell"
    questionOption = 0;
    menu = "question"
    canMove = false;
    alarm[0] = 5;
}else if a &amp;&amp; canMove &amp;&amp; menu == "question"{
    if questionOption = 0{
        cursor_y = 84; 
        if lastMenu == "buy"{
            if global.money &gt;= global.item_price[myItem[buyOption]]{
                global.money -= global.item_price[myItem[buyOption]];
                if global.money &lt; 0 {global.money = 0;}
                obtain(myItem[buyOption]);
                topText = "Thanks!";
            }else{
                topText = "Not enough money!!";   
            }
        }else if lastMenu == "sell"{
            global.money += (global.item_price[global.item[sellOption+1]]/2);
            global.item[sellOption+1] = 0;
            topText = "Thanks!";
        }
        myOption = 0;
        menu = "main"
        canMove = false;
        alarm[0] = 20;
    }else{
        cursor_y = 84; 
        topText = "Changed your mind?"
        myOption = 0;
        menu = "main"
        canMove = false;
        alarm[0] = 20;  
    }
}

/*------------------------------------------------*/
else if b &amp;&amp; canMove &amp;&amp; (menu == "buy" || menu == "sell"){
    cursor_y = 84; 
    topText = "Changed your mind?"
    myOption = 0;
    menu = "main"
    canMove = false;
    alarm[0] = 20;   
}else if b &amp;&amp; canMove &amp;&amp; menu == "question"{
    cursor_y = 84; 
    if lastMenu == "buy" buyOption = 0;
    else if lastMenu = "sell" sellOption = 0;
    menu = lastMenu
    lastMenu = ""
    canMove = false;
    alarm[0] = 5;   
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// draw shop menus
draw_set_font(fnt_message)
draw_set_color(c_white);
draw_set_halign(fa_left);

draw_sprite_ext(spr_finger,0,cursor_x,cursor_y,.5,.5,image_angle,image_blend,image_alpha);

draw_text(336,32,string(global.money)+ " Gil") 

if menu == "main"{
    draw_text(96,32,topText) 
    
    draw_text(96,80,"Buy")
    draw_text(96,96,"Sell")  
    draw_text(96,112,"Exit")       
}else if menu == "buy"{
    draw_text(96,32,"What would you like to buy?")
    
    draw_text(96,80,global.item_name[myItem[0]])  
    draw_text(96,96,global.item_name[myItem[1]])  
    draw_text(96,112,global.item_name[myItem[2]])
    draw_text(96,128,global.item_name[myItem[3]])  
    draw_text(96,144,global.item_name[myItem[4]])      
}else if menu == "sell"{
    draw_text(96,32,"Hello! What would you like to sell? ")
    
    draw_text(96,80,global.item_name[global.item[sellOption+1]]) 
    draw_text(96,96,global.item_name[global.item[sellOption+2]])  
    draw_text(96,112,global.item_name[global.item[sellOption+3]])
    draw_text(96,128,global.item_name[global.item[sellOption+4]])  
    draw_text(96,144,global.item_name[global.item[sellOption+5]])    
}else if menu == "question"{
    if lastMenu == ""{
        draw_text(96,32,"What can I do for you?")            
    }else if lastMenu == "buy"{
        draw_text(96,32,"Buy " + global.item_name[myItem[buyOption]] + " for " + string(global.item_price[myItem[buyOption]]) + " Gil?") 
    }else if lastMenu == "sell"{
        draw_text(96,32,"I can buy " + global.item_name[global.item[sellOption+1]] + " for " + string((global.item_price[global.item[sellOption+1]]/2)) + " Gil. OK?")    
    }  
    
    draw_text(96,80,"Yes") 
    draw_text(96,96,"No")  
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
